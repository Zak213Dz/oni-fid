<!DOCTYPE html>
<html>
  <body style="background:black; color:white; font-family:sans-serif;">
    <h1>Test Lecture Données</h1>
    <div id="resultat">Chargement...</div>

    <script>
      const id = new URLSearchParams(window.location.search).get('id');

      fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQOJ_jaEkUYtPc-RPRIVNTBvlPJ8mqszt7hnPWFSN-iTNvE9pWH00RoVlBEF2JrqktYzWLMu0s/pub?gid=1144651952&single=true&output=csv")
        .then(res => res.text())
        .then(csv => {
          const rows = csv.split("\n").map(r => r.split(","));
          const client = rows.find(row => row[4] === id);

          if (!client) {
            document.getElementById("resultat").innerHTML = "Client introuvable";
            return;
          }

          document.getElementById("resultat").innerHTML = `
            Nom : ${client[0]}<br>
            Prénom : ${client[1]}<br>
            ID : ${client[4]}<br>
            Points : ${client[5]}<br>
            Montant : ${client[6]}<br>
            Menus : ${client[8]}
          `;
        });
    </script>
  </body>
</html>
